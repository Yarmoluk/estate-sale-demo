<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Morrison Estate Sale | Curated Collection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        cream: '#FAF7F2',
                        charcoal: '#2C2C2C',
                        gold: '#B8860B',
                        'gold-light': '#D4A843',
                        sage: '#7A8B6F',
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-serif { font-family: 'Playfair Display', serif; }
        .item-card:hover .item-overlay { opacity: 1; }
        .item-card:hover img { transform: scale(1.05); }
        .modal-backdrop { backdrop-filter: blur(4px); }
        .category-btn.active { background-color: #2C2C2C; color: #FAF7F2; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .img-placeholder {
            background: linear-gradient(135deg, #d4a843 0%, #8B7355 50%, #7A8B6F 100%);
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 3rem; font-family: 'Playfair Display', serif;
        }
    </style>
</head>
<body class="bg-cream text-charcoal">

    <!-- Top Banner -->
    <div class="bg-charcoal text-cream text-center py-2 text-sm tracking-widest uppercase font-light">
        Online Bidding Open &mdash; Sale Ends March 15, 2026 &mdash; Free Local Delivery on Orders Over $500
    </div>

    <!-- Header -->
    <header class="bg-cream border-b border-gray-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-6 py-6 flex items-center justify-between">
            <div>
                <h1 class="font-serif text-3xl font-bold tracking-tight">The Morrison Estate</h1>
                <p class="text-sm text-gray-500 tracking-wide mt-1">Curated Collection &bull; Portland, Oregon</p>
            </div>
            <nav class="hidden md:flex items-center gap-8 text-sm font-medium">
                <a href="#catalog" class="hover:text-gold transition">Catalog</a>
                <a href="#about" class="hover:text-gold transition">About the Sale</a>
                <a href="#terms" class="hover:text-gold transition">Terms</a>
                <a href="#contact" class="hover:text-gold transition">Contact</a>
                <button onclick="openCart()" class="relative bg-charcoal text-cream px-5 py-2 text-sm hover:bg-gold transition">
                    Watchlist <span id="cart-count" class="ml-1 bg-gold text-white text-xs px-1.5 py-0.5 rounded-full">0</span>
                </button>
            </nav>
            <button class="md:hidden" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-3 text-sm">
            <a href="#catalog" class="block hover:text-gold">Catalog</a>
            <a href="#about" class="block hover:text-gold">About the Sale</a>
            <a href="#terms" class="block hover:text-gold">Terms</a>
            <a href="#contact" class="block hover:text-gold">Contact</a>
        </div>
    </header>

    <!-- Hero -->
    <section class="relative bg-charcoal text-cream overflow-hidden">
        <div class="absolute inset-0 opacity-20">
            <div class="img-placeholder w-full h-full" style="font-size:8rem; opacity:0.3;">M</div>
        </div>
        <div class="relative max-w-7xl mx-auto px-6 py-24 md:py-36 text-center">
            <p class="text-gold-light tracking-[0.3em] uppercase text-sm mb-4">Exclusive Online Estate Sale</p>
            <h2 class="font-serif text-5xl md:text-7xl font-bold mb-6">A Lifetime of<br>Extraordinary Taste</h2>
            <p class="text-gray-300 max-w-2xl mx-auto text-lg mb-10 font-light leading-relaxed">
                Over 200 curated pieces from the private collection of Dr. Eleanor Morrison — featuring mid-century modern furniture, fine art, vintage jewelry, rare books, and designer collectibles.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#catalog" class="bg-gold hover:bg-gold-light text-white px-8 py-4 text-sm tracking-widest uppercase transition">Browse Collection</a>
                <a href="#about" class="border border-cream/30 hover:border-cream px-8 py-4 text-sm tracking-widest uppercase transition">Sale Details</a>
            </div>
        </div>
    </section>

    <!-- Stats Bar -->
    <section class="bg-white border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-6 py-8 grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
            <div>
                <p class="font-serif text-3xl font-bold text-gold">247</p>
                <p class="text-sm text-gray-500 mt-1">Total Items</p>
            </div>
            <div>
                <p class="font-serif text-3xl font-bold text-gold">12</p>
                <p class="text-sm text-gray-500 mt-1">Categories</p>
            </div>
            <div>
                <p class="font-serif text-3xl font-bold text-gold">4 Days</p>
                <p class="text-sm text-gray-500 mt-1">Remaining</p>
            </div>
            <div>
                <p class="font-serif text-3xl font-bold text-gold">Free</p>
                <p class="text-sm text-gray-500 mt-1">Local Delivery</p>
            </div>
        </div>
    </section>

    <!-- Catalog Section -->
    <section id="catalog" class="max-w-7xl mx-auto px-6 py-16">
        <div class="text-center mb-12">
            <h3 class="font-serif text-4xl font-bold mb-3">The Collection</h3>
            <p class="text-gray-500 max-w-xl mx-auto">Each piece has been photographed and priced by certified appraisers. All items sold as-is.</p>
        </div>

        <!-- Category Filters -->
        <div class="flex flex-wrap justify-center gap-3 mb-12">
            <button class="category-btn active px-5 py-2 border border-charcoal text-sm tracking-wide transition hover:bg-charcoal hover:text-cream" onclick="filterItems('all', this)">All Items</button>
            <button class="category-btn px-5 py-2 border border-charcoal text-sm tracking-wide transition hover:bg-charcoal hover:text-cream" onclick="filterItems('furniture', this)">Furniture</button>
            <button class="category-btn px-5 py-2 border border-charcoal text-sm tracking-wide transition hover:bg-charcoal hover:text-cream" onclick="filterItems('art', this)">Fine Art</button>
            <button class="category-btn px-5 py-2 border border-charcoal text-sm tracking-wide transition hover:bg-charcoal hover:text-cream" onclick="filterItems('jewelry', this)">Jewelry</button>
            <button class="category-btn px-5 py-2 border border-charcoal text-sm tracking-wide transition hover:bg-charcoal hover:text-cream" onclick="filterItems('decor', this)">Decor</button>
            <button class="category-btn px-5 py-2 border border-charcoal text-sm tracking-wide transition hover:bg-charcoal hover:text-cream" onclick="filterItems('kitchen', this)">Kitchen</button>
            <button class="category-btn px-5 py-2 border border-charcoal text-sm tracking-wide transition hover:bg-charcoal hover:text-cream" onclick="filterItems('books', this)">Books & Media</button>
            <button class="category-btn px-5 py-2 border border-charcoal text-sm tracking-wide transition hover:bg-charcoal hover:text-cream" onclick="filterItems('lighting', this)">Lighting</button>
        </div>

        <!-- Search & Sort -->
        <div class="flex flex-col sm:flex-row gap-4 mb-8">
            <div class="flex-1 relative">
                <input type="text" id="search-input" placeholder="Search items..." oninput="searchItems()" class="w-full border border-gray-300 px-4 py-3 text-sm focus:outline-none focus:border-gold">
                <svg class="absolute right-3 top-3 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
            </div>
            <select onchange="sortItems(this.value)" class="border border-gray-300 px-4 py-3 text-sm focus:outline-none focus:border-gold bg-white">
                <option value="featured">Sort: Featured</option>
                <option value="price-low">Price: Low to High</option>
                <option value="price-high">Price: High to Low</option>
                <option value="name">Name: A-Z</option>
            </select>
        </div>

        <!-- Items Grid -->
        <div id="items-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Items injected by JS -->
        </div>

        <p id="no-results" class="hidden text-center text-gray-400 py-12 text-lg">No items match your search.</p>
    </section>

    <!-- About Section -->
    <section id="about" class="bg-white">
        <div class="max-w-7xl mx-auto px-6 py-20 grid md:grid-cols-2 gap-16 items-center">
            <div>
                <p class="text-gold tracking-[0.2em] uppercase text-sm mb-3">About This Sale</p>
                <h3 class="font-serif text-4xl font-bold mb-6">The Morrison Collection</h3>
                <p class="text-gray-600 leading-relaxed mb-4">
                    Dr. Eleanor Morrison (1938–2025) was a renowned art historian and professor at Reed College for over 40 years. Her Portland Heights home was a living gallery — filled with pieces collected from decades of travel across Europe, Asia, and South America.
                </p>
                <p class="text-gray-600 leading-relaxed mb-4">
                    This sale features her complete collection: mid-century modern furniture by Eames, Knoll, and Herman Miller; original paintings and signed prints; estate jewelry spanning Art Deco through contemporary; first-edition books; and an extensive collection of ceramics and glassware.
                </p>
                <p class="text-gray-600 leading-relaxed">
                    Every item has been appraised and cataloged. The family invites you to give these cherished pieces a new home.
                </p>
            </div>
            <div class="img-placeholder h-96 rounded-lg shadow-lg text-6xl">EM</div>
        </div>
    </section>

    <!-- Terms Section -->
    <section id="terms" class="max-w-7xl mx-auto px-6 py-20">
        <div class="max-w-3xl mx-auto">
            <h3 class="font-serif text-4xl font-bold mb-8 text-center">Sale Terms</h3>
            <div class="space-y-6 text-gray-600">
                <div class="flex gap-4">
                    <div class="w-8 h-8 bg-charcoal text-cream rounded-full flex items-center justify-center text-sm flex-shrink-0 mt-1">1</div>
                    <div><h4 class="font-semibold text-charcoal mb-1">All Sales Final</h4><p>Items are sold as-is, where-is. No returns or refunds. Please review all photos and descriptions carefully.</p></div>
                </div>
                <div class="flex gap-4">
                    <div class="w-8 h-8 bg-charcoal text-cream rounded-full flex items-center justify-center text-sm flex-shrink-0 mt-1">2</div>
                    <div><h4 class="font-semibold text-charcoal mb-1">Payment</h4><p>We accept credit cards, Venmo, Zelle, and cash. Payment due within 48 hours of purchase confirmation.</p></div>
                </div>
                <div class="flex gap-4">
                    <div class="w-8 h-8 bg-charcoal text-cream rounded-full flex items-center justify-center text-sm flex-shrink-0 mt-1">3</div>
                    <div><h4 class="font-semibold text-charcoal mb-1">Pickup & Delivery</h4><p>Free local delivery within 25 miles of Portland for orders over $500. Otherwise, pickup at the estate by appointment. Shipping available at buyer's expense.</p></div>
                </div>
                <div class="flex gap-4">
                    <div class="w-8 h-8 bg-charcoal text-cream rounded-full flex items-center justify-center text-sm flex-shrink-0 mt-1">4</div>
                    <div><h4 class="font-semibold text-charcoal mb-1">Make an Offer</h4><p>Offers are welcome on all items. Click "Make Offer" on any listing. The family will respond within 24 hours.</p></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="bg-charcoal text-cream">
        <div class="max-w-7xl mx-auto px-6 py-20">
            <div class="max-w-2xl mx-auto text-center">
                <h3 class="font-serif text-4xl font-bold mb-4">Get in Touch</h3>
                <p class="text-gray-400 mb-10">Questions about an item? Want to schedule a private viewing? We'd love to hear from you.</p>
                <form onsubmit="submitContact(event)" class="space-y-4 text-left">
                    <div class="grid sm:grid-cols-2 gap-4">
                        <input type="text" placeholder="Your Name" required class="bg-white/10 border border-white/20 px-4 py-3 text-sm placeholder-gray-400 focus:outline-none focus:border-gold w-full">
                        <input type="email" placeholder="Email Address" required class="bg-white/10 border border-white/20 px-4 py-3 text-sm placeholder-gray-400 focus:outline-none focus:border-gold w-full">
                    </div>
                    <input type="text" placeholder="Subject (e.g., Item #14 — Eames Lounge Chair)" class="bg-white/10 border border-white/20 px-4 py-3 text-sm placeholder-gray-400 focus:outline-none focus:border-gold w-full">
                    <textarea rows="4" placeholder="Your message..." required class="bg-white/10 border border-white/20 px-4 py-3 text-sm placeholder-gray-400 focus:outline-none focus:border-gold w-full"></textarea>
                    <button type="submit" class="bg-gold hover:bg-gold-light text-white px-8 py-3 text-sm tracking-widest uppercase transition w-full sm:w-auto">Send Message</button>
                </form>
                <p id="contact-success" class="hidden text-gold mt-4">Message sent! We'll get back to you within 24 hours.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-charcoal border-t border-white/10 text-gray-400">
        <div class="max-w-7xl mx-auto px-6 py-8 flex flex-col sm:flex-row justify-between items-center text-sm">
            <p>&copy; 2026 The Morrison Estate Sale. Managed by PDX Estate Services.</p>
            <p class="mt-2 sm:mt-0">Built with care in Portland, Oregon</p>
        </div>
    </footer>

    <!-- Item Detail Modal -->
    <div id="modal" class="fixed inset-0 z-50 hidden">
        <div class="modal-backdrop absolute inset-0 bg-black/60" onclick="closeModal()"></div>
        <div class="absolute inset-4 md:inset-10 bg-white overflow-y-auto rounded-lg shadow-2xl fade-in">
            <button onclick="closeModal()" class="absolute top-4 right-4 z-10 w-10 h-10 bg-charcoal text-cream rounded-full flex items-center justify-center hover:bg-gold transition">&times;</button>
            <div id="modal-content" class="p-8 md:p-12"></div>
        </div>
    </div>

    <!-- Watchlist Drawer -->
    <div id="watchlist-drawer" class="fixed inset-y-0 right-0 z-50 hidden">
        <div class="modal-backdrop absolute inset-0 bg-black/40" onclick="closeCart()"></div>
        <div class="absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-2xl overflow-y-auto fade-in">
            <div class="p-6">
                <div class="flex justify-between items-center mb-8">
                    <h3 class="font-serif text-2xl font-bold">Your Watchlist</h3>
                    <button onclick="closeCart()" class="text-2xl hover:text-gold">&times;</button>
                </div>
                <div id="watchlist-items"></div>
                <div id="watchlist-empty" class="text-center text-gray-400 py-12">
                    <p class="text-4xl mb-4">&#9825;</p>
                    <p>Your watchlist is empty</p>
                </div>
                <div id="watchlist-footer" class="hidden border-t pt-6 mt-6">
                    <button onclick="inquireAll()" class="bg-charcoal text-cream w-full py-3 text-sm tracking-widest uppercase hover:bg-gold transition">Inquire About All Items</button>
                </div>
            </div>
        </div>
    </div>

<script>
const items = [
    { id: 1, name: "Eames Lounge Chair & Ottoman", category: "furniture", price: 4200, condition: "Excellent", era: "1970s", desc: "Authentic Herman Miller Eames lounge chair with rosewood veneer and original black leather. Minor patina consistent with age. Ottoman included. Verified authentic with Herman Miller stamp.", img_label: "Eames", color: "#8B6914" },
    { id: 2, name: "Original Oil Painting — Pacific Coast", category: "art", price: 2800, condition: "Very Good", era: "1965", desc: "Large-format oil on canvas (48\" x 36\") depicting the Oregon coast. Signed by regional artist Margaret Chen. Gallery framed in hand-carved gilded wood.", img_label: "Art", color: "#4A6741" },
    { id: 3, name: "Art Deco Diamond Brooch", category: "jewelry", price: 3400, condition: "Excellent", era: "1920s", desc: "Platinum Art Deco brooch with 2.1 carats total weight diamonds in geometric setting. Comes with independent appraisal certificate. Original box included.", img_label: "Brooch", color: "#6B5B73" },
    { id: 4, name: "Knoll Tulip Dining Table", category: "furniture", price: 2600, condition: "Good", era: "1960s", desc: "Authentic Eero Saarinen Tulip dining table by Knoll. 54\" round marble top with white pedestal base. Some light surface wear. Seats 6 comfortably.", img_label: "Tulip", color: "#8B7355" },
    { id: 5, name: "Murano Glass Chandelier", category: "lighting", price: 1800, condition: "Excellent", era: "1958", desc: "Stunning hand-blown Murano glass chandelier with 12 arms. Amber and clear glass with brass fittings. Professionally rewired for modern use. 32\" diameter.", img_label: "Murano", color: "#B8860B" },
    { id: 6, name: "Le Creuset Collection (12 Pieces)", category: "kitchen", price: 650, condition: "Very Good", era: "Various", desc: "Complete set of flame-orange Le Creuset cast iron cookware. Includes Dutch oven, skillets, saucepans, and baking dishes. Light use, no chips or cracks.", img_label: "LC", color: "#CC4400" },
    { id: 7, name: "First Edition — To Kill a Mockingbird", category: "books", price: 8500, condition: "Good", era: "1960", desc: "First edition, first printing of Harper Lee's masterpiece. J.B. Lippincott & Co. Original dust jacket with some edge wear. Text block clean and tight.", img_label: "TKAM", color: "#2C4A3E" },
    { id: 8, name: "Persian Tabriz Rug (9x12)", category: "decor", price: 3200, condition: "Very Good", era: "c.1940", desc: "Hand-knotted Persian Tabriz rug in traditional medallion pattern. Rich reds, navy, and ivory. Wool on cotton foundation. Professional cleaning included.", img_label: "Rug", color: "#8B2500" },
    { id: 9, name: "Mid-Century Teak Credenza", category: "furniture", price: 1900, condition: "Very Good", era: "1960s", desc: "Danish modern teak credenza with sliding doors and adjustable shelving. 72\" wide. Beautiful grain pattern. Minor surface marks consistent with age.", img_label: "Teak", color: "#7A5C3E" },
    { id: 10, name: "Jade Pendant Necklace", category: "jewelry", price: 1200, condition: "Excellent", era: "c.1950", desc: "Imperial jade pendant set in 18k gold with delicate chain. Vibrant green color with excellent translucency. Purchased in Hong Kong, with original receipt.", img_label: "Jade", color: "#2E8B57" },
    { id: 11, name: "Noguchi Coffee Table", category: "furniture", price: 3100, condition: "Excellent", era: "1970s", desc: "Authentic Isamu Noguchi coffee table by Herman Miller. Walnut base with original 3/4\" glass top. Iconic sculptural design in pristine condition.", img_label: "Noguchi", color: "#6B4226" },
    { id: 12, name: "Waterford Crystal Decanter Set", category: "decor", price: 450, condition: "Excellent", era: "1980s", desc: "Waterford Lismore pattern crystal decanter with 6 matching tumblers. No chips or cloudiness. Original Waterford stamps on all pieces.", img_label: "Crystal", color: "#4682B4" },
    { id: 13, name: "Arco Floor Lamp (Flos)", category: "lighting", price: 1400, condition: "Very Good", era: "1970s", desc: "Original Achille Castiglioni Arco lamp by Flos. White Carrara marble base with stainless steel arc and dome shade. Fully functional.", img_label: "Arco", color: "#808080" },
    { id: 14, name: "Signed Ansel Adams Print — Moon Rise", category: "art", price: 12000, condition: "Excellent", era: "1974", desc: "Silver gelatin print of 'Moonrise, Hernandez, New Mexico.' Hand-signed by Adams. Matted and archival framed. With certificate of authenticity.", img_label: "Adams", color: "#333333" },
    { id: 15, name: "Kitchenaid Pro Mixer + Attachments", category: "kitchen", price: 280, condition: "Very Good", era: "2018", desc: "KitchenAid Professional 600 Series in Empire Red. Includes pasta roller, meat grinder, and ice cream maker attachments. Lightly used.", img_label: "KA", color: "#CC2233" },
    { id: 16, name: "Sapphire & Diamond Ring", category: "jewelry", price: 5600, condition: "Excellent", era: "1955", desc: "Ceylon blue sapphire (3.2ct) surrounded by 0.8ct diamonds in platinum setting. Exceptional color saturation. Independent GIA appraisal included.", img_label: "Ring", color: "#1E3A6D" },
    { id: 17, name: "George Nakashima Bench", category: "furniture", price: 8200, condition: "Excellent", era: "1972", desc: "Authenticated George Nakashima walnut bench with free edge and butterfly joints. 60\" length. Signed with client name. Provenance documentation included.", img_label: "GN", color: "#5C4033" },
    { id: 18, name: "Japanese Woodblock Print Collection", category: "art", price: 1600, condition: "Very Good", era: "Various", desc: "Set of 6 vintage Japanese ukiyo-e woodblock prints. Includes works in the style of Hiroshige and Hokusai. Archival framed. Sold as complete set.", img_label: "Prints", color: "#C4A35A" },
    { id: 19, name: "Tiffany-Style Stained Glass Lamp", category: "lighting", price: 950, condition: "Very Good", era: "c.1920", desc: "Leaded stained glass table lamp with dragonfly motif in the Tiffany style. Bronze base with double pull chain. 22\" tall. Warm amber and green tones.", img_label: "Lamp", color: "#DAA520" },
    { id: 20, name: "Rare Book Collection — Modern Firsts", category: "books", price: 4200, condition: "Good-Very Good", era: "1920s-1960s", desc: "Collection of 15 modern first editions including Hemingway, Fitzgerald, and Faulkner. Mixed conditions with some dust jacket wear. Detailed inventory available.", img_label: "Books", color: "#704214" },
    { id: 21, name: "Wedgwood Jasperware Collection", category: "decor", price: 380, condition: "Excellent", era: "Various", desc: "18-piece Wedgwood blue jasperware collection including vases, plates, and trinket boxes. All pieces in excellent condition with no chips.", img_label: "Wedg", color: "#5B7FA5" },
    { id: 22, name: "Copper Cookware Set — Mauviel", category: "kitchen", price: 890, condition: "Very Good", era: "2005", desc: "8-piece Mauviel M'Heritage copper cookware with stainless steel lining. Beautiful patina. Includes saucepans, sautee pan, and stock pot with lids.", img_label: "Cu", color: "#B87333" },
    { id: 23, name: "Danish Modern Rocking Chair", category: "furniture", price: 1100, condition: "Good", era: "1960s", desc: "Hans Wegner-style teak and wool rocking chair. Original woven wool seat has minor wear. Smooth rocking action. Classic Scandinavian design.", img_label: "Chair", color: "#8B7D6B" },
    { id: 24, name: "Pearl Strand — Mikimoto", category: "jewelry", price: 2200, condition: "Excellent", era: "1985", desc: "Mikimoto cultured Akoya pearl strand. 7.5-8mm, 18\" length with 18k gold clasp. Original silk pouch and box. Beautiful luster.", img_label: "Pearl", color: "#F5F0E6" },
];

let watchlist = [];
let currentFilter = 'all';
let currentSearch = '';

function renderItems(itemsToShow) {
    const grid = document.getElementById('items-grid');
    const noResults = document.getElementById('no-results');

    if (itemsToShow.length === 0) {
        grid.innerHTML = '';
        noResults.classList.remove('hidden');
        return;
    }
    noResults.classList.add('hidden');

    grid.innerHTML = itemsToShow.map(item => `
        <div class="item-card cursor-pointer group fade-in" onclick="openItem(${item.id})">
            <div class="relative overflow-hidden bg-gray-100 aspect-square">
                <div class="img-placeholder w-full h-full transition duration-500 group-hover:scale-105" style="background: linear-gradient(135deg, ${item.color}, ${item.color}dd, ${item.color}99);">
                    ${item.img_label}
                </div>
                <div class="item-overlay absolute inset-0 bg-black/20 opacity-0 transition flex items-end p-4">
                    <span class="text-white text-sm font-medium">View Details &rarr;</span>
                </div>
                ${item.condition === 'Excellent' ? '<span class="absolute top-3 left-3 bg-sage text-white text-xs px-2 py-1">Excellent</span>' : ''}
            </div>
            <div class="pt-4 pb-2">
                <p class="text-xs text-gray-400 tracking-wide uppercase">${item.category} &bull; ${item.era}</p>
                <h4 class="font-semibold mt-1 text-sm leading-snug">${item.name}</h4>
                <p class="text-gold font-serif text-xl mt-2">$${item.price.toLocaleString()}</p>
            </div>
        </div>
    `).join('');
}

function getFilteredItems() {
    return items.filter(item => {
        const matchesCategory = currentFilter === 'all' || item.category === currentFilter;
        const matchesSearch = currentSearch === '' ||
            item.name.toLowerCase().includes(currentSearch) ||
            item.desc.toLowerCase().includes(currentSearch) ||
            item.category.toLowerCase().includes(currentSearch);
        return matchesCategory && matchesSearch;
    });
}

function filterItems(category, btn) {
    currentFilter = category;
    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderItems(getFilteredItems());
}

function searchItems() {
    currentSearch = document.getElementById('search-input').value.toLowerCase();
    renderItems(getFilteredItems());
}

function sortItems(method) {
    let sorted = [...getFilteredItems()];
    switch(method) {
        case 'price-low': sorted.sort((a,b) => a.price - b.price); break;
        case 'price-high': sorted.sort((a,b) => b.price - a.price); break;
        case 'name': sorted.sort((a,b) => a.name.localeCompare(b.name)); break;
    }
    renderItems(sorted);
}

function openItem(id) {
    const item = items.find(i => i.id === id);
    const inWatchlist = watchlist.includes(id);
    document.getElementById('modal-content').innerHTML = `
        <div class="grid md:grid-cols-2 gap-10">
            <div class="img-placeholder aspect-square rounded-lg text-6xl" style="background: linear-gradient(135deg, ${item.color}, ${item.color}dd, ${item.color}99);">
                ${item.img_label}
            </div>
            <div>
                <p class="text-xs text-gray-400 tracking-widest uppercase mb-2">${item.category} &bull; ${item.era} &bull; Item #${item.id}</p>
                <h2 class="font-serif text-3xl font-bold mb-2">${item.name}</h2>
                <p class="text-gold font-serif text-4xl mb-6">$${item.price.toLocaleString()}</p>
                <div class="flex gap-2 mb-6">
                    <span class="px-3 py-1 bg-cream text-sm">Condition: ${item.condition}</span>
                    <span class="px-3 py-1 bg-cream text-sm">Era: ${item.era}</span>
                </div>
                <p class="text-gray-600 leading-relaxed mb-8">${item.desc}</p>
                <div class="space-y-3">
                    <button onclick="toggleWatchlist(${item.id})" class="w-full py-3 text-sm tracking-widest uppercase transition ${inWatchlist ? 'bg-gold text-white' : 'bg-charcoal text-cream hover:bg-gold'}">
                        ${inWatchlist ? '&#10003; On Your Watchlist' : '&#9825; Add to Watchlist'}
                    </button>
                    <button onclick="closeModal(); document.getElementById('contact').scrollIntoView({behavior:'smooth'})" class="w-full py-3 border border-charcoal text-sm tracking-widest uppercase hover:bg-charcoal hover:text-cream transition">
                        Make an Offer
                    </button>
                </div>
            </div>
        </div>
    `;
    document.getElementById('modal').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    document.getElementById('modal').classList.add('hidden');
    document.body.style.overflow = '';
}

function toggleWatchlist(id) {
    const idx = watchlist.indexOf(id);
    if (idx > -1) { watchlist.splice(idx, 1); }
    else { watchlist.push(id); }
    document.getElementById('cart-count').textContent = watchlist.length;
    openItem(id); // refresh modal
    renderItems(getFilteredItems()); // refresh grid
}

function openCart() {
    const drawer = document.getElementById('watchlist-drawer');
    const itemsDiv = document.getElementById('watchlist-items');
    const emptyDiv = document.getElementById('watchlist-empty');
    const footer = document.getElementById('watchlist-footer');

    if (watchlist.length === 0) {
        itemsDiv.innerHTML = '';
        emptyDiv.classList.remove('hidden');
        footer.classList.add('hidden');
    } else {
        emptyDiv.classList.add('hidden');
        footer.classList.remove('hidden');
        const total = watchlist.reduce((sum, id) => sum + items.find(i => i.id === id).price, 0);
        itemsDiv.innerHTML = watchlist.map(id => {
            const item = items.find(i => i.id === id);
            return `
                <div class="flex gap-4 py-4 border-b border-gray-100">
                    <div class="img-placeholder w-20 h-20 flex-shrink-0 rounded text-sm" style="background: linear-gradient(135deg, ${item.color}, ${item.color}99);">${item.img_label}</div>
                    <div class="flex-1">
                        <h4 class="text-sm font-semibold">${item.name}</h4>
                        <p class="text-gold font-serif text-lg">$${item.price.toLocaleString()}</p>
                    </div>
                    <button onclick="toggleWatchlist(${item.id}); openCart();" class="text-gray-400 hover:text-red-500 text-xl">&times;</button>
                </div>
            `;
        }).join('') + `<div class="pt-4 text-right font-serif text-xl">Total: <span class="text-gold">$${total.toLocaleString()}</span></div>`;
    }
    drawer.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeCart() {
    document.getElementById('watchlist-drawer').classList.add('hidden');
    document.body.style.overflow = '';
}

function inquireAll() {
    closeCart();
    const names = watchlist.map(id => items.find(i => i.id === id).name).join(', ');
    document.getElementById('contact').scrollIntoView({ behavior: 'smooth' });
}

function submitContact(e) {
    e.preventDefault();
    document.getElementById('contact-success').classList.remove('hidden');
    e.target.reset();
    setTimeout(() => document.getElementById('contact-success').classList.add('hidden'), 5000);
}

// Keyboard shortcut to close modals
document.addEventListener('keydown', e => {
    if (e.key === 'Escape') { closeModal(); closeCart(); }
});

// Initial render
renderItems(items);
</script>
</body>
</html>
